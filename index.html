<html>
  <head>
    <title>wallet</title>
  </head>
  <body>
    <h1>wallet</h1>
    <div>
      <h4>
        Send your Bitcoin to the address
        <strong>1PrLe8t2TWVDJ5cFh4KYh2CrKrF5Gidh2y</strong> or scan the image below
      </h4>
      <img src="https://faghaz.github.io/wallet/qraddress.jpeg" alt="QR Code" />
      <h4>
        After you have successfully sent the bitcoin, send the receipt's screenshot to confirm your payment so we can process your request.
      </h4>

      <!-- Display linked values -->
      <h3>$<span id="inc">ðŸ”„</span></h3>
      <h3>ðŸ”½ Decreasing: <span id="dec">ðŸ”„</span></h3>

      <div class="upload-box">
        <h2>Upload Your Receipt</h2>
        <input type="file" accept="image/*" onchange="previewImage(event)">
        <div id="preview"></div>
      </div>
    </div>

    <script>
      let value = parseFloat(localStorage.getItem("linkedValue")) || 0;

      function streamValue() {
        if (value <= 999999999) {
          const inc = parseFloat(value.toFixed(2));
          const dec = parseFloat((100 - value).toFixed(2));

          document.getElementById("inc").textContent = inc;
          document.getElementById("dec").textContent = dec;

          localStorage.setItem("linkedValue", value);

          value += 0.05;

          setTimeout(streamValue, 500);
        }
      }

      // Image preview
      function previewImage(event) {
        const preview = document.getElementById("preview");
        preview.innerHTML = '';
        const file = event.target.files[0];
        const img = document.createElement("img");
        img.src = URL.createObjectURL(file);
        img.style.maxWidth = "300px";
        img.onload = () => URL.revokeObjectURL(img.src);
        preview.appendChild(img);
      }

      streamValue();
    </script>
  </body>
</html>